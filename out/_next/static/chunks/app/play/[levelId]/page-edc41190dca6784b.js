(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[400],{1793:function(e,t,a){Promise.resolve().then(a.bind(a,4748)),Promise.resolve().then(a.bind(a,378))},4748:function(e,t,a){"use strict";a.d(t,{LanguageProvider:function(){return l},Z:function(){return c}});var o=a(7437),s=a(2265);let i={en:JSON.parse('{"app":{"title":"TOKYO MUSE DROP","tagline":"Exclusive Photo Drops — Shot in Tokyo"},"nav":{"play":"Play","album":"Album","models":"Models","settings":"Settings"},"play":{"title":"Level Select","streak":"Streak","dailyPlays":"Daily Plays","level":"Level","start":"Start Level","objective":"Objective","reach_score":"Reach {{score}} points in {{moves}} moves"},"puzzle":{"score":"Score","moves":"Moves","target":"Target","victory":"Level Complete!","defeat":"Out of Moves","tryAgain":"Try Again","continue":"Continue","reward":"Reward Unlocked","revealProgress":"Photo Reveal Progress +1","photographersCut":"Photographer\'s Cut","shootNote":"Shot on location in Tokyo with natural lighting"},"album":{"title":"Photo Album","progress":"Progress","locked":"Locked","playToReveal":"Play more levels to reveal this photo","revealed":"Revealed","stage":"Stage {{current}} of {{total}}","viewExternal":"View External Links","allRevealed":"All photos revealed for this model!"},"models":{"title":"Featured Models","verified":"All models are 18+, verified, and content is fully licensed.","contentPolicy":"No nudity. No swimwear. Professional fashion & portrait content only.","instagram":"Instagram","tiktok":"TikTok","fanSite":"Fan Site"},"settings":{"title":"Settings","language":"Language","english":"English","japanese":"日本語","contentPolicy":"Content Policy","policyText":"No nudity. No swimwear. 18+ models. Licensed content.","resetProgress":"Reset Progress","resetConfirm":"Are you sure? This will clear all unlocked photos.","reset":"Reset","cancel":"Cancel"},"boosters":{"title":"Boosters","extraMoves":"+5 Moves","extraPlays":"Extra Daily Attempts","comingSoon":"Coming soon!","description":"Power-ups to help you clear challenging levels"},"common":{"close":"Close","back":"Back","loading":"Loading..."}}'),ja:JSON.parse('{"app":{"title":"TOKYO MUSE DROP","tagline":"東京ミューズドロップ — 本アプリ限定の撮り下ろしフォト"},"nav":{"play":"プレイ","album":"アルバム","models":"モデル","settings":"設定"},"play":{"title":"レベル選択","streak":"連続クリア","dailyPlays":"本日のプレイ回数","level":"レベル","start":"スタート","objective":"目標","reach_score":"{{moves}}手で{{score}}点を達成"},"puzzle":{"score":"スコア","moves":"残り手数","target":"目標","victory":"レベルクリア!","defeat":"手数切れ","tryAgain":"もう一度","continue":"続ける","reward":"報酬獲得","revealProgress":"フォト公開進行度 +1","photographersCut":"フォトグラファーズカット","shootNote":"東京ロケ・自然光撮影"},"album":{"title":"フォトアルバム","progress":"進行度","locked":"ロック中","playToReveal":"レベルをクリアして写真を公開","revealed":"公開済み","stage":"ステージ {{current}} / {{total}}","viewExternal":"外部リンクを見る","allRevealed":"このモデルの全写真が公開されました!"},"models":{"title":"出演モデル","verified":"全モデルは18歳以上、本人確認済み、許諾済コンテンツです。","contentPolicy":"ヌード・水着なし。ファッション&ポートレート限定。","instagram":"Instagram","tiktok":"TikTok","fanSite":"ファンサイト"},"settings":{"title":"設定","language":"言語","english":"English","japanese":"日本語","contentPolicy":"コンテンツポリシー","policyText":"ヌード・水着なし。出演者は18歳以上。許諾済コンテンツ。","resetProgress":"進行度をリセット","resetConfirm":"本当にリセットしますか？全ての公開済み写真がクリアされます。","reset":"リセット","cancel":"キャンセル"},"boosters":{"title":"ブースター","extraMoves":"+5手","extraPlays":"追加プレイ権","comingSoon":"近日公開!","description":"難関レベルをクリアするためのパワーアップ"},"common":{"close":"閉じる","back":"戻る","loading":"読み込み中..."}}')};var r=a(9271);let n=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,s.useState)("en"),[c,d]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{let e=r.A.getLanguage(),t=e||(navigator.language.toLowerCase().startsWith("ja")?"ja":"en");l(t),e||r.A.setLanguage(t),d(!0)},[]),c)?(0,o.jsx)(n.Provider,{value:{language:a,setLanguage:e=>{l(e),r.A.setLanguage(e)},t:(e,t)=>(function(e,t,a){let o=t.split("."),s=i[e];for(let e of o){if(!s||"object"!=typeof s)return t;s=s[e]}return"string"!=typeof s?t:a?s.replace(/\{\{(\w+)\}\}/g,(e,t)=>{var o;return(null===(o=a[t])||void 0===o?void 0:o.toString())||e}):s})(a,e,t)},children:t}):null}function c(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},378:function(e,t,a){"use strict";a.d(t,{default:function(){return u}});var o=a(7437),s=a(4748);let i=0;class r{generateGrid(){let e=[];for(let t=0;t<this.size;t++){e[t]=[];for(let a=0;a<this.size;a++){let o;let s=0;do o=Math.floor(Math.random()*this.numTypes),s++;while(s<10&&this.wouldCreateMatch(e,t,a,o));e[t][a]={type:o,id:i++}}}return e}wouldCreateMatch(e,t,a,o){var s,i,r,n,l,c;return a>=2&&(null===(s=e[t][a-1])||void 0===s?void 0:s.type)===o&&(null===(i=e[t][a-2])||void 0===i?void 0:i.type)===o||t>=2&&(null===(n=e[t-1])||void 0===n?void 0:null===(r=n[a])||void 0===r?void 0:r.type)===o&&(null===(c=e[t-2])||void 0===c?void 0:null===(l=c[a])||void 0===l?void 0:l.type)===o}getGrid(){return this.grid}isValidSwap(e,t){let a=Math.abs(e.row-t.row),o=Math.abs(e.col-t.col);return!!(1===a&&0===o||0===a&&1===o)&&!(e.row<0)&&!(e.row>=this.size)&&!(e.col<0)&&!(e.col>=this.size)&&!(t.row<0)&&!(t.row>=this.size)&&!(t.col<0)&&!(t.col>=this.size)}swap(e,t){if(!this.isValidSwap(e,t))return!1;let a=this.grid[e.row][e.col];return this.grid[e.row][e.col]=this.grid[t.row][t.col],this.grid[t.row][t.col]=a,0!==this.findMatches().length||(this.grid[t.row][t.col]=this.grid[e.row][e.col],this.grid[e.row][e.col]=a,!1)}findMatches(){let e=new Set;for(let t=0;t<this.size;t++)for(let a=0;a<this.size-2;a++){let o=this.grid[t][a].type;if(this.grid[t][a+1].type===o&&this.grid[t][a+2].type===o){e.add("".concat(t,",").concat(a)),e.add("".concat(t,",").concat(a+1)),e.add("".concat(t,",").concat(a+2));let s=a+3;for(;s<this.size&&this.grid[t][s].type===o;)e.add("".concat(t,",").concat(s)),s++}}for(let t=0;t<this.size;t++)for(let a=0;a<this.size-2;a++){let o=this.grid[a][t].type;if(this.grid[a+1][t].type===o&&this.grid[a+2][t].type===o){e.add("".concat(a,",").concat(t)),e.add("".concat(a+1,",").concat(t)),e.add("".concat(a+2,",").concat(t));let s=a+3;for(;s<this.size&&this.grid[s][t].type===o;)e.add("".concat(s,",").concat(t)),s++}}return Array.from(e).map(e=>{let[t,a]=e.split(",").map(Number);return{row:t,col:a}})}clearMatches(e){let t=0;for(let a of e)this.grid[a.row][a.col]={type:-1,id:-1},t+=10;return e.length>3&&(t+=(e.length-3)*5),t}dropTiles(){for(let e=0;e<this.size;e++){let t=this.size-1;for(let a=this.size-1;a>=0;a--)-1!==this.grid[a][e].type&&(a!==t&&(this.grid[t][e]=this.grid[a][e],this.grid[a][e]={type:-1,id:-1}),t--);for(let a=t;a>=0;a--)this.grid[a][e]={type:Math.floor(Math.random()*this.numTypes),id:i++}}}processMatches(){let e=0,t=this.findMatches();for(;t.length>0;)e+=this.clearMatches(t),this.dropTiles(),t=this.findMatches();return e}hasValidMoves(){for(let e=0;e<this.size;e++)for(let t=0;t<this.size;t++){if(t<this.size-1){let a=this.grid[e][t];this.grid[e][t]=this.grid[e][t+1],this.grid[e][t+1]=a;let o=this.findMatches().length>0;if(this.grid[e][t+1]=this.grid[e][t],this.grid[e][t]=a,o)return!0}if(e<this.size-1){let a=this.grid[e][t];this.grid[e][t]=this.grid[e+1][t],this.grid[e+1][t]=a;let o=this.findMatches().length>0;if(this.grid[e+1][t]=this.grid[e][t],this.grid[e][t]=a,o)return!0}}return!1}constructor(e=8,t=5){this.size=e,this.numTypes=t,this.grid=this.generateGrid()}}var n=a(7318),l=a(9271),c=a(441),d=a(1169),h=a(2265),g=a(7138);let m={1:{targetScore:500,moves:25},2:{targetScore:700,moves:22},3:{targetScore:900,moves:20},4:{targetScore:1100,moves:18},5:{targetScore:1300,moves:18},6:{targetScore:1500,moves:16},7:{targetScore:1800,moves:15},8:{targetScore:2e3,moves:15}};function u(e){let{levelId:t}=e,{t:a,language:i}=(0,s.Z)(),u=(0,d.useRouter)(),[p]=(0,h.useState)(()=>new r(8,5)),[f,v]=(0,h.useState)([]),[_,y]=(0,h.useState)(0),[x,j]=(0,h.useState)(0),[S,k]=(0,h.useState)(null),[N,w]=(0,h.useState)(!1),[P,b]=(0,h.useState)(!1),[z,M]=(0,h.useState)(!1),[A,D]=(0,h.useState)(!1),E=m[t]||m["1"];(0,h.useEffect)(()=>{v(p.getGrid()),j(E.moves)},[p,E.moves]);let C=(0,h.useCallback)(async(e,t)=>{if(N||P)return;let a={row:e,col:t};if(!S){k(a);return}if(p.swap(S,a)){w(!0),k(null),await new Promise(e=>setTimeout(e,200));let e=_+p.processMatches(),t=x-1;if(y(e),j(t),v([...p.getGrid()]),e>=E.targetScore){M(!0),b(!0);let e=(0,n.GE)(),t=c.C.find(t=>t.id===e);t&&l.A.addReveal(e,t.photos),(0,n.IT)(),setTimeout(()=>D(!0),500)}else t<=0&&(b(!0),(0,n.IT)());w(!1)}else k(a)},[S,N,P,p,_,x,E.targetScore]);return(0,o.jsx)("div",{className:"min-h-screen p-4 md:p-6 bg-gradient-to-br from-charcoal via-charcoal to-charcoal/95",children:(0,o.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)(g.default,{href:"/play",className:"text-cream/60 hover:text-cream transition-colors text-sm",children:["← ",a("common.back")]}),(0,o.jsxs)("div",{className:"text-lg font-display font-bold text-gold",children:[a("play.level")," ",t]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{className:"card text-center",children:[(0,o.jsx)("div",{className:"text-sm text-cream/60",children:a("puzzle.score")}),(0,o.jsx)("div",{className:"text-2xl font-bold text-gold",children:_})]}),(0,o.jsxs)("div",{className:"card text-center",children:[(0,o.jsx)("div",{className:"text-sm text-cream/60",children:a("puzzle.target")}),(0,o.jsx)("div",{className:"text-2xl font-bold",children:E.targetScore})]}),(0,o.jsxs)("div",{className:"card text-center",children:[(0,o.jsx)("div",{className:"text-sm text-cream/60",children:a("puzzle.moves")}),(0,o.jsx)("div",{className:"text-2xl font-bold text-rose",children:x})]})]}),(0,o.jsx)("div",{className:"card",children:(0,o.jsx)("div",{className:"grid grid-cols-8 gap-1 md:gap-2 max-w-md mx-auto",children:f.map((e,t)=>e.map((e,a)=>{let s=(null==S?void 0:S.row)===t&&(null==S?void 0:S.col)===a;return(0,o.jsx)("button",{onClick:()=>C(t,a),disabled:N||P,className:"tile tile-".concat(e.type," ").concat(s?"ring-2 ring-cream scale-110":"")},"".concat(t,"-").concat(a,"-").concat(e.id))}))})}),P&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-6 z-50 animate-fade-in",children:(0,o.jsxs)("div",{className:"card max-w-md w-full space-y-6 text-center",children:[(0,o.jsx)("h2",{className:"text-3xl font-display font-bold",children:a(z?"puzzle.victory":"puzzle.defeat")}),z&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("div",{className:"text-6xl",children:"\uD83C\uDF89"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("div",{className:"text-xl text-gold",children:a("puzzle.revealProgress")}),(0,o.jsx)("div",{className:"text-sm text-cream/60",children:a("puzzle.photographersCut")})]})]}),!z&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("div",{className:"text-6xl",children:"\uD83D\uDE14"}),(0,o.jsxs)("div",{className:"text-cream/70",children:[a("puzzle.score"),": ",_," / ",E.targetScore]})]}),(0,o.jsxs)("div",{className:"flex gap-3",children:[(0,o.jsx)("button",{onClick:()=>{window.location.reload()},className:"btn-secondary flex-1",children:a("puzzle.tryAgain")}),z&&(0,o.jsx)("button",{onClick:()=>{u.push("/album")},className:"btn-primary flex-1",children:a("puzzle.continue")})]})]})})]})})}},441:function(e,t,a){"use strict";a.d(t,{C:function(){return o}});let o=[{id:"model1",display_name_en:"Sakura Tanaka",display_name_ja:"田中さくら",tagline_en:"Tokyo-based fashion model",tagline_ja:"東京発ファッションモデル",instagram:"https://instagram.com/sakura_tanaka",tiktok:"https://tiktok.com/@sakura_tanaka",fansite:"https://example.com/sakura",photos:[{id:"photo1",filename:"model1_1.jpg",shoot_note_en:"Shot in Shibuya with natural lighting",shoot_note_ja:"渋谷で自然光撮影"},{id:"photo2",filename:"model1_2.jpg",shoot_note_en:"Evening golden hour in Omotesando",shoot_note_ja:"表参道でゴールデンアワー撮影"},{id:"photo3",filename:"model1_3.jpg",shoot_note_en:"Studio session in Harajuku",shoot_note_ja:"原宿スタジオ撮影"}]},{id:"model2",display_name_en:"Yuki Matsumoto",display_name_ja:"松本ゆき",tagline_en:"Editorial & street style",tagline_ja:"エディトリアル＆ストリート",instagram:"https://instagram.com/yuki_matsumoto",tiktok:"https://tiktok.com/@yuki_matsumoto",fansite:"https://example.com/yuki",photos:[{id:"photo1",filename:"model2_1.jpg",shoot_note_en:"Urban exploration in Shinjuku",shoot_note_ja:"新宿アーバン撮影"},{id:"photo2",filename:"model2_2.jpg",shoot_note_en:"Night lights in Akihabara",shoot_note_ja:"秋葉原ナイトライト撮影"},{id:"photo3",filename:"model2_3.jpg",shoot_note_en:"Minimalist composition in Ginza",shoot_note_ja:"銀座ミニマル撮影"}]},{id:"model3",display_name_en:"Mio Nakamura",display_name_ja:"中村美緒",tagline_en:"Contemporary portraiture",tagline_ja:"コンテンポラリーポートレート",instagram:"https://instagram.com/mio_nakamura",tiktok:"https://tiktok.com/@mio_nakamura",fansite:"https://example.com/mio",photos:[{id:"photo1",filename:"model3_1.jpg",shoot_note_en:"Natural beauty in Yoyogi Park",shoot_note_ja:"代々木公園自然美撮影"},{id:"photo2",filename:"model3_2.jpg",shoot_note_en:"Soft afternoon in Daikanyama",shoot_note_ja:"代官山午後の柔らかな光"},{id:"photo3",filename:"model3_3.jpg",shoot_note_en:"Bold colors in Nakameguro",shoot_note_ja:"中目黒ビビッドカラー撮影"}]},{id:"model4",display_name_en:"Rina Kobayashi",display_name_ja:"小林里奈",tagline_en:"Avant-garde fashion",tagline_ja:"アバンギャルドファッション",instagram:"https://instagram.com/rina_kobayashi",tiktok:"https://tiktok.com/@rina_kobayashi",fansite:"https://example.com/rina",photos:[{id:"photo1",filename:"model4_1.jpg",shoot_note_en:"Architectural lines in Roppongi",shoot_note_ja:"六本木建築ライン撮影"},{id:"photo2",filename:"model4_2.jpg",shoot_note_en:"Dramatic shadows in Ebisu",shoot_note_ja:"恵比寿ドラマティックシャドウ"},{id:"photo3",filename:"model4_3.jpg",shoot_note_en:"Monochrome elegance in Marunouchi",shoot_note_ja:"丸の内モノクロエレガンス"}]},{id:"model5",display_name_en:"Hana Suzuki",display_name_ja:"鈴木花",tagline_en:"Natural & ethereal",tagline_ja:"ナチュラル＆エセリアル",instagram:"https://instagram.com/hana_suzuki",tiktok:"https://tiktok.com/@hana_suzuki",fansite:"https://example.com/hana",photos:[{id:"photo1",filename:"model5_1.jpg",shoot_note_en:"Cherry blossoms in Ueno",shoot_note_ja:"上野桜撮影"},{id:"photo2",filename:"model5_2.jpg",shoot_note_en:"Soft morning light in Aoyama",shoot_note_ja:"青山朝の柔らかな光"},{id:"photo3",filename:"model5_3.jpg",shoot_note_en:"Dreamy atmosphere in Meguro",shoot_note_ja:"目黒ドリーミーな雰囲気"}]}]},7318:function(e,t,a){"use strict";a.d(t,{GE:function(){return r},IT:function(){return l},gP:function(){return n}});var o=a(441),s=a(9271);function i(){return new Date().toISOString().split("T")[0]}function r(){let e=i(),t=s.A.getDailyData();if(t&&t.date===e)return t.featuredModelId;let a=function(e){let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t&=t;return Math.abs(t)}(e)%o.C.length,r=o.C[a].id;return s.A.setDailyData({date:e,featuredModelId:r,freePlaysUsed:0}),r}function n(){let e=i(),t=s.A.getDailyData();return t&&t.date===e?Math.max(0,10-t.freePlaysUsed):10}function l(){let e=i(),t=s.A.getDailyData();t&&t.date===e?s.A.setDailyData({...t,freePlaysUsed:t.freePlaysUsed+1}):s.A.setDailyData({date:e,featuredModelId:r(),freePlaysUsed:1})}},9271:function(e,t,a){"use strict";a.d(t,{A:function(){return o}});class o{static getLanguage(){return localStorage.getItem(this.KEYS.LANG)}static setLanguage(e){localStorage.setItem(this.KEYS.LANG,e)}static getProgress(){let e=localStorage.getItem(this.KEYS.PROGRESS);if(!e)return{};try{return JSON.parse(e)}catch(e){return{}}}static setProgress(e){localStorage.setItem(this.KEYS.PROGRESS,JSON.stringify(e))}static getDailyData(){let e=localStorage.getItem(this.KEYS.DAILY);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}static setDailyData(e){localStorage.setItem(this.KEYS.DAILY,JSON.stringify(e))}static resetProgress(){localStorage.removeItem(this.KEYS.PROGRESS),localStorage.removeItem(this.KEYS.DAILY)}static addReveal(e,t){let a=this.getProgress();for(let o of(a[e]||(a[e]={photos:{},totalReveals:0}),t)){let t=a[e].photos[o.id]||0;if(t<3){a[e].photos[o.id]=t+1,a[e].totalReveals++,this.setProgress(a);return}}a[e].totalReveals++,this.setProgress(a)}static getPhotoStage(e,t){var a;return(null===(a=this.getProgress()[e])||void 0===a?void 0:a.photos[t])||0}static getModelProgress(e){return this.getProgress()[e]||{photos:{},totalReveals:0}}}o.KEYS={LANG:"tmd_lang",PROGRESS:"tmd_progress",DAILY:"tmd_daily"}}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=1793)}),_N_E=e.O()}]);